<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RoyTech Website</title>
  <style>
    body {
      margin: 0;
      font-family: monospace, Arial, sans-serif;
      background: #0a0a0a;
      color: #00ffcc;
      transition: background 0.3s, color 0.3s;
    }
    .light-mode {
      background: #f4f4f4;
      color: #222;
    }
    /* Header */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 15px;
      background: rgba(0, 0, 0, 0.8);
      position: fixed;
      top: 0;
      width: 100%;
      z-index: 1000;
    }
    .menu-icon {
      font-size: 26px;
      cursor: pointer;
    }
    .right-icons {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .dark-toggle {
      cursor: pointer;
      padding: 5px 10px;
      border: 1px solid #00ffcc;
      border-radius: 6px;
    }
    /* Weather */
    .battery-weather {
      position: fixed;
      top: 40px;
      left: 10px;
      font-size: 14px;
    }
    /* Typing Effect Section */
    .typing-section {
      position: fixed;
      bottom: 60px;
      left: 0;
      width: 100%;
      text-align: center;
      font-size: 18px;
      padding: 10px;
    }
    .join-btn {
      margin-top: 10px;
      background: #00ffcc;
      color: #000;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
    }
    /* Footer */
    footer {
      position: fixed;
      bottom: 10px;
      width: 100%;
      text-align: center;
      font-size: 12px;
      opacity: 0.7;
    }
    /* Drawer Menu */
    .drawer {
      position: fixed;
      top: 0;
      left: -250px;
      width: 250px;
      height: 100%;
      background: #111;
      transition: left 0.3s ease-in-out;
      z-index: 1500;
      padding: 20px;
    }
    .drawer.open {
      left: 0;
    }
    .drawer ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .drawer li {
      padding: 10px 0;
      border-bottom: 1px solid #333;
      cursor: pointer;
    }
    .drawer-footer {
      position: absolute;
      bottom: 20px;
      width: 100%;
      text-align: center;
      font-size: 12px;
    }
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      z-index: 2000;
      justify-content: center;
      align-items: center;
      color: #fff;
    }
    .modal-content {
      background: #1a1a1a;
      padding: 20px;
      border-radius: 10px;
      width: 90%;
      max-width: 400px;
      text-align: center;
      position: relative;
    }
    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      cursor: pointer;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <header>
    <span class="menu-icon" onclick="toggleDrawer()">‚ò∞</span>
    <div class="right-icons">
      <span class="dark-toggle" onclick="toggleDarkMode()">üåì</span>
    </div>
  </header>

  <div class="battery-weather" id="weather">Loading weather...</div>

  <!-- Typing Section -->
  <div class="typing-section">
    <span id="typing-text"></span><br />
    <button class="join-btn" onclick="window.open('https://whatsapp.com/channel/0029VbBH9IGCnA7l7rdZlB0e','_blank')">
      Join RoyTech Team
    </button>
  </div>

  <footer>Powered by RoyTech | ¬©2025</footer>

  <!-- Drawer Menu -->
  <div class="drawer" id="drawer">
    <ul>
      <li onclick="openModal('calcModal')">üßÆ Calculator</li>
      <li onclick="openModal('gameModal')">üéÆ Block Game</li>
      <li onclick="openModal('calendarModal')">üìÖ Calendar</li>
      <li onclick="openModal('supportModal')">üí¨ Support</li>
    </ul>
    <div class="drawer-footer">Powered by RoyTech</div>
  </div>

  <!-- Calculator Modal -->
  <div class="modal" id="calcModal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal('calcModal')">‚úñ</span>
      <h3>Calculator</h3>
      <input type="text" id="calcDisplay" readonly style="width: 100%; font-size: 20px;" /><br />
      <div>
        <button onclick="appendCalc('7')">7</button>
        <button onclick="appendCalc('8')">8</button>
        <button onclick="appendCalc('9')">9</button>
        <button onclick="appendCalc('/')">√∑</button><br />
        <button onclick="appendCalc('4')">4</button>
        <button onclick="appendCalc('5')">5</button>
        <button onclick="appendCalc('6')">6</button>
        <button onclick="appendCalc('*')">√ó</button><br />
        <button onclick="appendCalc('1')">1</button>
        <button onclick="appendCalc('2')">2</button>
        <button onclick="appendCalc('3')">3</button>
        <button onclick="appendCalc('-')">‚àí</button><br />
        <button onclick="appendCalc('0')">0</button>
        <button onclick="clearCalc()">C</button>
        <button onclick="calculate()">=</button>
        <button onclick="appendCalc('+')">+</button>
      </div>
    </div>
  </div>

  <!-- Game Modal -->
  <div class="modal" id="gameModal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal('gameModal')">‚úñ</span>
      <h3>Block Game</h3>
      <canvas id="blockGame" width="300" height="400" style="background:#000"></canvas>
    </div>
  </div>

  <!-- Calendar Modal -->
  <div class="modal" id="calendarModal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal('calendarModal')">‚úñ</span>
      <h3>Calendar</h3>
      <div id="calendar"></div>
    </div>
  </div>

  <!-- Support Modal -->
  <div class="modal" id="supportModal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal('supportModal')">‚úñ</span>
      <h3>Support</h3>
      <p>M-Pesa: 254716388654</p>
      <p>PayPal: rogersonyango87@gmail.com</p>
      <p>Airtel Money: 254755660053</p>
      <textarea id="supportMsg" placeholder="Leave a message"></textarea><br />
      <button onclick="sendWhatsApp()">Send to WhatsApp</button>
    </div>
  </div>

  <script>
    // Drawer
    function toggleDrawer() {
      document.getElementById('drawer').classList.toggle('open');
    }

    // Dark/Light Mode
    function toggleDarkMode() {
      document.body.classList.toggle('light-mode');
    }

    // Modals
    function openModal(id) {
      document.getElementById(id).style.display = 'flex';
    }
    function closeModal(id) {
      document.getElementById(id).style.display = 'none';
    }

    // Calculator
    function appendCalc(val) {
      document.getElementById('calcDisplay').value += val;
    }
    function clearCalc() {
      document.getElementById('calcDisplay').value = '';
    }
    function calculate() {
      try {
        document.getElementById('calcDisplay').value = eval(document.getElementById('calcDisplay').value);
      } catch {
        document.getElementById('calcDisplay').value = 'Error';
      }
    }

    // Typing Effect
    const text = "RoyTech builds modern solutions, smart bots & websites. Join us to explore innovation!";
    let i = 0;
    function typingEffect() {
      if (i < text.length) {
        document.getElementById("typing-text").innerHTML += text.charAt(i);
        i++;
        setTimeout(typingEffect, 70);
      }
    }
    typingEffect();

    // Weather
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(pos => {
        fetch(`https://api.open-meteo.com/v1/forecast?latitude=${pos.coords.latitude}&longitude=${pos.coords.longitude}&current_weather=true`)
          .then(res => res.json())
          .then(data => {
            const w = data.current_weather;
            document.getElementById('weather').innerText = 
              `üìç Weather: ${w.temperature}¬∞C | ${new Date().toDateString()}`;
          });
      });
    }

    // WhatsApp
    function sendWhatsApp() {
      const msg = document.getElementById('supportMsg').value;
      window.open(`https://wa.me/254755660053?text=${encodeURIComponent(msg)}`, '_blank');
    }
  </script>
</body>
</html>
